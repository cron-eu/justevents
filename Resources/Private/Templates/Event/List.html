{namespace je=SpoonerWeb\Justevents\ViewHelpers}
<f:layout name="Default" />

<f:section name="main">
	<je:widget.paginate objects="{events}" as="paginatedEvents" configuration="{itemsPerPage: 6, insertAbove: 1, insertBelow: 1}">
		<ul class="event-list">
			<f:for each="{paginatedEvents}" as="event">
				<li class="event-item h-event">
					<header class="event-header">
						<time class="dt-start" datetime="{event.dateFrom -> f:format.date(format: 'Y-m-d')} {event.timeFrom -> je:time()}">{event.dateFrom -> f:format.date(format: 'd')}.</time><f:if condition="{event.dateFrom -> f:format.date(format: 'dmY')} != {event.dateTo -> f:format.date(format: 'dmY')}">-<time class="dt-end" datetime="{event.dateTo -> f:format.date(format: 'Y-m-d')}  {event.timeTo -> je:time()}">{event.dateTo -> f:format.date(format: 'd')}.</time></f:if>
						<span class="event-datemonth">{event.dateFrom -> f:format.date(format: '%B %Y')}</span>
					</header>
					<div class="event-content">
						<h3 class="event-title">{event.title}</h3>
						<p class="event-details"><je:time onlyHours="1">{event.timeFrom}</je:time>-<je:time onlyHours="1">{event.timeTo}</je:time> <f:translate key="o-clock" /> - {event.location}</p>
						<div class="event-description" aria-collapsed="true">
							<f:image class="event-img" src="{event.image.uid}" treatIdAsReference="1" title="{event.image.originalResource.title}" alt="{event.image.originalResource.alternative}" maxWidth="240" />
							<p><f:format.html parseFuncTSPath="lib.parseFunc">{event.description}</f:format.html></p>
						</div>
					</div>
				</li>
			</f:for>
		</ul>
		<script>
			APP.loadModule('accordion', {
				head: '.event-details',
				headPos: 'after',
				buttonStyle: 'simple',
				off: 8,
				on: 0
			})
		</script>
	</je:widget.paginate>
</f:section>